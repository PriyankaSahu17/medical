"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AwsServiceWorkflow = void 0;
<<<<<<< HEAD
const promises_1 = require("fs/promises");
const error_1 = require("../../../error");
const service_workflow_1 = require("./service_workflow");
=======
const fs = require("fs");
const error_1 = require("../../../error");
const service_workflow_1 = require("./service_workflow");
/** Error for when the token is missing in the environment. */
const TOKEN_MISSING_ERROR = 'AWS_WEB_IDENTITY_TOKEN_FILE must be set in the environment.';
>>>>>>> fbc8dfd1dc1e8142d05458c7d646053f0b1a6dbf
/**
 * Device workflow implementation for AWS.
 *
 * @internal
 */
class AwsServiceWorkflow extends service_workflow_1.ServiceWorkflow {
    constructor() {
        super();
    }
    /**
     * Get the token from the environment.
     */
    async getToken() {
        const tokenFile = process.env.AWS_WEB_IDENTITY_TOKEN_FILE;
        if (!tokenFile) {
<<<<<<< HEAD
            throw new error_1.MongoAWSError('AWS_WEB_IDENTITY_TOKEN_FILE must be set in the environment.');
        }
        return (0, promises_1.readFile)(tokenFile, 'utf8');
=======
            throw new error_1.MongoAWSError(TOKEN_MISSING_ERROR);
        }
        return fs.promises.readFile(tokenFile, 'utf8');
>>>>>>> fbc8dfd1dc1e8142d05458c7d646053f0b1a6dbf
    }
}
exports.AwsServiceWorkflow = AwsServiceWorkflow;
//# sourceMappingURL=aws_service_workflow.js.map